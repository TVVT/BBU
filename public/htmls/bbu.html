<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Document</title>
</head>
	<link rel="stylesheet" href="/style/bookmark.css">
	<style>
		#bug_form div{margin: 20px 0 0 30px;}
		#bug_form div label{width: 80px;display: inline-block;text-align: right;}
		#submit{margin: 10px 0 0 80px;}
		#bug_form input{line-height: 18px;}
	</style>
<body>
	<div class="bookContent">
		<form id="bug_form" enctype="multipart/form-data" action="../bugReceiver" method="POST">
			<h1>提交1个问题</h1>
			<div><label for="username">昵称：</label><input id="username" name="username" type="text" required=""></div>
			<div><label for="email">Email：</label><input id="email" name="email" type="email" required></div>
			<div><label for="bugdetail">bug描述：</label><textarea id="bugdetail" name="bugdetail" type="text" required></textarea></div>
			<div><label for="bugimg">上传截图：</label><input id="bugimg" class="custom-file-input" name="bugimg" type="file" accept="image/*"></div>
			<!-- 浏览器信息 -->
			<input id="browserinfo" name="browserinfo" type="hidden">
			<input id="weburl" name="weburl" type="hidden">	
			<input type="hidden" name="screenwidth" id="screenwidth">
			<div><input id="submit" type="submit" value="提交"></div>
		</form>
		<div class="copy">&copy;1号店 TVVT </div>
	</div>

</body>
	<!-- todo 验证表单 -->
	<script type="text/javascript">
		(function(window){
			var browserinfo = document.getElementById("browserinfo"),
				weburl = document.getElementById("weburl"),
				screenwidth = document.getElementById("screenwidth"),
				submit = document.getElementById("submit"),
				submitUserName = document.getElementById("username"),
				email = document.getElementById("email");
			browserinfo.value = navigator.userAgent;
			var url = window.location.href;
			var weburlLastIndex = url.indexOf("&&"); 
			weburl.value = url.indexOf("?") != -1?url.substring(url.indexOf("?")+5,weburlLastIndex):"";
			screenwidth.value = url.indexOf("&&")!=-1?url.substring(url.indexOf("&&")+14,url.length):"";

			//对用户名和email做缓存
			if (localStorage) {
				username.value = localStorage.username?localStorage.username:"";
				email.value = localStorage.submitUserEmail?localStorage.submitUserEmail:"";
				submit.onclick = function(){
					localStorage.submitUserName = submitUserName.value?submitUserName.value:"";
					localStorage.submitUserEmail = email.value?email.value:"";
				}
			};
			
		})(window);
	</script>
</html>
